{% comment %}
  Brands showcase section for displaying trusted electronics brands
{% endcomment %}

<style>
  .brands-showcase {
    padding: 60px 0;
    background: white;
    border-top: 1px solid #f1f5f9;
    border-bottom: 1px solid #f1f5f9;
  }

  .brands-showcase-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .brands-showcase-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .brands-showcase-header h2 {
    font-size: 2rem;
    font-weight: 700;
    color: #1a202c;
    margin: 0 0 1rem;
  }

  .brands-showcase-header p {
    font-size: 1.1rem;
    color: #4a5568;
    margin: 0;
  }

  .brands-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 2rem;
    align-items: center;
  }

  .brand-item {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    background: #fafbfc;
    border-radius: 1rem;
    transition: all 0.3s ease;
    aspect-ratio: 3/2;
    position: relative;
    overflow: hidden;
  }

  .brand-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, transparent 0%, rgba(102, 126, 234, 0.05) 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .brand-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }

  .brand-item:hover::before {
    opacity: 1;
  }

  .brand-item img {
    max-width: 100%;
    max-height: 60px;
    object-fit: contain;
    filter: grayscale(100%) opacity(0.7);
    transition: all 0.3s ease;
  }

  .brand-item:hover img {
    filter: grayscale(0%) opacity(1);
    transform: scale(1.05);
  }

  .brand-item-placeholder {
    width: 100%;
    height: 60px;
    background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e0 100%);
    border-radius: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #64748b;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .brands-marquee {
    overflow: hidden;
    white-space: nowrap;
    position: relative;
  }

  .brands-marquee-content {
    display: inline-flex;
    gap: 2rem;
    animation: marquee 30s linear infinite;
  }

  .brands-marquee .brand-item {
    flex-shrink: 0;
    width: 200px;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .brands-showcase.marquee-style .brands-grid {
    display: none;
  }

  .brands-showcase:not(.marquee-style) .brands-marquee {
    display: none;
  }

  @media (max-width: 768px) {
    .brands-showcase {
      padding: 40px 0;
    }

    .brands-showcase-container {
      padding: 0 1rem;
    }

    .brands-grid {
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1rem;
    }

    .brand-item {
      padding: 1rem;
    }

    .brand-item img {
      max-height: 40px;
    }

    .brand-item-placeholder {
      height: 40px;
      font-size: 0.8rem;
    }
  }
</style>

<section class="brands-showcase {% if section.settings.display_style == 'marquee' %}marquee-style{% endif %}" {{ section.shopify_attributes }}>
  <div class="brands-showcase-container">
    {% if section.settings.heading != blank or section.settings.description != blank %}
      <div class="brands-showcase-header">
        {% if section.settings.heading != blank %}
          <h2>{{ section.settings.heading }}</h2>
        {% endif %}
        
        {% if section.settings.description != blank %}
          <p>{{ section.settings.description }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="brands-grid">
      {% for block in section.blocks %}
        <div class="brand-item" {{ block.shopify_attributes }}>
          {% if block.settings.brand_logo != blank %}
            <img
              src="{{ block.settings.brand_logo | image_url: width: 200 }}"
              alt="{{ block.settings.brand_logo.alt | escape | default: block.settings.brand_name }}"
              loading="lazy"
              width="200"
              height="60"
            >
          {% else %}
            <div class="brand-item-placeholder">
              {{ block.settings.brand_name | default: 'Brand Logo' }}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    <div class="brands-marquee">
      <div class="brands-marquee-content">
        {% for i in (1..2) %}
          {% for block in section.blocks %}
            <div class="brand-item">
              {% if block.settings.brand_logo != blank %}
                <img
                  src="{{ block.settings.brand_logo | image_url: width: 200 }}"
                  alt="{{ block.settings.brand_logo.alt | escape | default: block.settings.brand_name }}"
                  loading="lazy"
                  width="200"
                  height="60"
                >
              {% else %}
                <div class="brand-item-placeholder">
                  {{ block.settings.brand_name | default: 'Brand Logo' }}
                </div>
              {% endif %}
            </div>
          {% endfor %}
        {% endfor %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Brands Showcase",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Trusted Brands"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "We partner with the world's leading electronics brands"
    },
    {
      "type": "select",
      "id": "display_style",
      "label": "Display Style",
      "options": [
        {
          "value": "grid",
          "label": "Grid"
        },
        {
          "value": "marquee",
          "label": "Marquee (scrolling)"
        }
      ],
      "default": "grid"
    }
  ],
  "blocks": [
    {
      "type": "brand",
      "name": "Brand",
      "settings": [
        {
          "type": "image_picker",
          "id": "brand_logo",
          "label": "Brand Logo"
        },
        {
          "type": "text",
          "id": "brand_name",
          "label": "Brand Name",
          "info": "Used as fallback if no logo is provided"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Brands Showcase",
      "blocks": [
        {
          "type": "brand",
          "settings": {
            "brand_name": "Apple"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Samsung"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Sony"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Dell"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "HP"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Lenovo"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "LG"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Xiaomi"
          }
        }
      ]
    }
  ]
}
{% endschema %}
